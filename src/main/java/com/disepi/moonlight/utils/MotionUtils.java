package com.disepi.moonlight.utils;

import cn.nukkit.math.Vector2;

public class MotionUtils {
    public static final double PI = 3.1415927;
    public static final double DEG = PI/180.0;

    // The default downwards velocity
    public static final double GRAVITY = 0.07840000093;

    // The maximum speed you can reach while on ground (no sprint jumping)
    public static final double GROUND_SPEED_DEFAULT = 0.28071764996629206;

    // Below are arrays of packet logged vanilla values.
    // This may not be the best solution but it saves performance from not needing to do the math and also because it is accurate and easier to create checks with
    public static final double[] GRAVITY_FALL_VALUES = {0.07537841796875, 0.227783203125, 0.45550537109375, 0.756988525390625, 1.130889892578125, 1.5758056640625, 2.090087890625, 2.6724853515625, 3.321685791015625, 4.036285400390625, 4.8149871826171875, 5.656585693359375, 6.5596923828125, 7.5230865478515625, 8.545684814453125, 9.626296997070312, 10.763595581054688, 11.956588745117188, 13.051895141601562, 14.20489501953125, 15.414199829101562, 16.678695678710938, 17.997390747070312, 19.369293212890625, 20.7930908203125, 22.267990112304688, 23.792892456054688, 25.36669921875, 26.988693237304688, 28.657699584960938, 30.372787475585938, 32.13319396972656, 33.93798828125, 35.78619384765625, 37.67698669433594, 39.609588623046875, 41.58319091796875, 43.59678649902344, 45.64979553222656, 47.74128723144531, 49.870697021484375, 52.03709411621094, 54.23968505859375, 56.477996826171875, 58.751190185546875, 61.05848693847656, 63.43218994140625, 65.83689880371094, 68.2427978515625, 70.6802978515625, 73.14869689941406, 75.64749145507812, 78.17599487304688, 80.73359680175781, 83.31979370117188, 85.93399047851562, 88.57559204101562, 91.24409484863281, 93.93899536132812, 96.65969848632812, 99.40568542480469, 102.17658996582031, 104.97189331054688, 107.7908935546875, 110.63339233398438, 113.49879455566406, 116.3865966796875, 119.29649353027344, 122.22799682617188, 125.18058776855469, 128.1538848876953, 131.14759063720703, 134.16119384765625, 137.19438934326172, 140.24668884277344, 143.31769561767578, 146.40719604492188, 149.51459503173828, 152.6397933959961, 155.78229522705078, 158.9416961669922, 162.11779022216797, 165.31019592285156, 168.51869201660156, 171.74269104003906, 174.98219299316406, 178.2366943359375, 181.50588989257812, 184.7896957397461, 188.08759307861328, 191.3993911743164, 194.72489166259766, 198.06369400024414, 201.41559219360352, 204.78029251098633};
    public static final double[] STRAFE_JUMP_VALUE = {0.27991796215912146,0.28022269585476733,0.28032991126112083,0.48054448069783906,0.2878225290160514,0.2874258370896276,0.2870291452643456,0.2866320392689242,0.2863273061302154,0.28612896034590074,0.2857170114912056,0.2855339231469551,0.28542670560182093,0.2851207348511019,0.28492362882507394,0.2848316678077127,0.2846184817561915,0.2844341509505199,0.28442013619445755,0.2842366302438091,0.28411498922738027,0.28412900264583696,0.28393148286490777,0.2839319010768638,0.2838250996660478,0.2837170525282732,0.28373313710138404,0.025499262764326857,0.02550052279428472,0.025407716610526227,0.02550052279428472,0.025499262764326857,0.025499262764326857,0.025499262764326857,0.02551577973771465,0.025392458922839405,0.02550052279428472,0.025514520461218177,0.02549891578862263,0.025501015832537912,0.02549891578862263,0.025407716610526227,0.02550052279428472,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.025407716610526227,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.02551577973771465,0.025499262764326857,0.025392110487692212,0.025516272481165506,0.02549891578862263,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.02540898118025315,0.025499262764326857,0.025499262764326857,0.025499262764326857,0.02551577973771465,0.025392458922839405,0.02550052279428472,0.025499262764326857,0.02551417369300843,0.025501015832537912,0.02549891578862263,0.025407716610526227,0.02550052279428472,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.025407716610526227,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.02551577973771465,0.025499262764326857,0.025392110487692212,0.025516272481165506,0.02549891578862263,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.02540898118025315,0.025499262764326857,0.025499262764326857,0.025499262764326857,0.02550052279428472,0.025407716610526227,0.02550052279428472,0.025499262764326857,0.02551417369300843,0.025501015832537912,0.02549891578862263,0.025407716610526227,0.02550052279428472,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.050906979363018794,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.02550052279428472,0.025514520461218177,0.025392110487692212,0.025501015832537912,0.02551417369300843,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.02540898118025315,0.025499262764326857,0.025499262764326857,0.025499262764326857,0.02550052279428472,0.025407716610526227,0.02550052279428472,0.025499262764326857,0.02551417369300843,0.025501015832537912,0.02549891578862263,0.025392458922839405,0.02551577973771465,0.025499262764326857,0.02550052279428472,0.025499262764326857,0.025407716610526227,0.025499262764326857,0.02550052279428472};

    // Returns the expected velocity based off the amount of ticks off ground
    public static double getExpectedFallValue(int fallTick) {
        if (fallTick < 0)
            return 0;
        if(fallTick > GRAVITY_FALL_VALUES.length)
            return 204.78029251098633f;
        return GRAVITY_FALL_VALUES[fallTick];
    }

    // Returns the expected move velocity based off the amount of ticks off ground
    public static double getExpectedSpeedValue(int fallTick) {
        if (fallTick < 0 || fallTick > STRAFE_JUMP_VALUE.length)
            return 0;
        return STRAFE_JUMP_VALUE[fallTick];
    }

}
